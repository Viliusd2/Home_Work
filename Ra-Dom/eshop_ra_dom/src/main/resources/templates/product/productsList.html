<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head th:replace="fragments/main :: head(#{products.header})"></head>
<body>

<div th:replace="fragments/main :: navbar">Cia yra navbar (menu)</div>

<div th:align="center">
<h2 th:text="#{products.header}" ></h2>
<div th:if="${not productsPage.hasContent()}" th:text="#{products.empty.message}"></div>
</div>

<div th:if="${productsPage.hasContent()}"
     class="container">
    <span th:text="#{products.all(${productsPage.totalElements})}"></span>
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col"><a th:replace="fragments/main :: sortColumn(data=${productsPage},name='name',fieldName=#{products.name},path='/products/list',down='fa-arrow-down-a-z',up='fa-arrow-up-z-a')"></a></th>
            <th scope="col"><a th:replace="fragments/main :: sortColumn(data=${productsPage}, name='countOfStock',fieldName=#{products.quantity},path=@{/products/list}, down='fa-arrow-down-1-9',up='fa-arrow-up-9-1')"></a></th>
            <th scope="col"><a th:replace="fragments/main :: sortColumn(data=${productsPage}, name='price',fieldName=#{products.price},path=@{/products/list},down='fa-arrow-down-1-9',up='fa-arrow-up-9-1')"></a></th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="product: ${productsPage}">
            <td><a th:href="@{/products/{productId}/update(productId=${product.productId})}"
                   th:text="${product.name}"></a></td>
            <td th:text="${product.quantity}"></td>
            <td th:text="${product.price}"></td>
            <td><a class="btn btn-danger"th:href="@{/products/{productId}/delete(productId=${product.productId})}" th:text="#{products.delete}"></a></td>
        </tr>
        </tbody>
    </table>
    <span th:text="#{products.all(${productsPage.totalElements})}"></span>

    <nav class="d-flex justify-content-center">
        <ul class="pagination"
            th:with="
                orderParam=${productsPage.sort.iterator().hasNext() ? productsPage.sort.iterator().next : null},
                sortParam=${orderParam.property + ',' + orderParam.direction + ',ignorecase'}">

        <li class="page-item"
                th:classappend="${!productsPage.hasPrevious()} ? 'disabled'"
            >
                <a class="page-link"
                   th:href="@{/products/list(page=${productsPage.number} - 1,sort=${sortParam})}"
                   th:text="#{products.previous}"
                ></a>
            </li>
            <li class="page-item"
                th:each="pageNumber: ${#numbers.sequence(0, productsPage.totalPages - 1)}"
                th:classappend="${pageNumber == productsPage.number ? 'active' : ''}"
            >
                <a class="page-link"
                   th:href="@{/products/list(page=${pageNumber},sort=${sortParam})}"
                   th:text="${pageNumber + 1}"></a>
            </li>
            <li class="page-item"
                th:classappend="${!productsPage.hasNext()} ? 'disabled'"
            >
                <a class="page-link"
                   th:href="@{/products/list(page=${productsPage.number} + 1,sort=${sortParam})}"
                   th:text="#{products.next}"
                ></a>
            </li>
        </ul>
    </nav>

</div>

<div th:replace="fragments/main :: footer"></div>

</body>
</html>
